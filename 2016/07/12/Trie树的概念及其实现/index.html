<!DOCTYPE html>
<html lang="zh-CN">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Trie树的概念及其实现">




  <meta name="keywords" content="数据结构, L">










  <link rel="alternate" href="/atom.xml" title="L">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.1">



<link rel="canonical" href="http://liujunming.github.io/2016/07/12/Trie树的概念及其实现/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.1">



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> Trie树的概念及其实现 - L </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">L</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/links">
        <li class="mobile-menu-item">
          
          
            Links
          
        </li>
      </a>
    
      <a href="/books">
        <li class="mobile-menu-item">
          
          
            Books
          
        </li>
      </a>
    
      <a href="/course">
        <li class="mobile-menu-item">
          
          
            Course
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">L</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/links">
            
            
              Links
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/books">
            
            
              Books
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/course">
            
            
              Course
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Trie树的概念及其实现
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-07-12
        </span>
        
          <span class="post-category">
            
              <a href="/categories/数据结构/">数据结构</a>
            
          </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Trie的概念"><span class="toc-text">Trie的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Trie-implementation-in-C"><span class="toc-text">Trie implementation in C</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h2 id="Trie的概念"><a href="#Trie的概念" class="headerlink" title="Trie的概念"></a>Trie的概念</h2><p>在计算机科学中，trie，又称前缀树或字典树，是一种有序树，用于保存关联数组，其中的键通常是字符串。与二叉查找树不同，键不是直接保存在节点中，而是由节点在树中的位置决定。一个节点的所有子孙都有相同的前缀，也就是这个节点对应的字符串，而根节点对应空字符串。一般情况下，不是所有的节点都有对应的值，只有叶子节点和部分内部节点所对应的键才有相关的值。<br><a id="more"></a><br>看到概念，也许读者会觉得有点抽象，博主搜到一篇大神写的博客，顿时觉得茅塞顿开（ps：博主给的参考链接可能访问不了，请fq）。这篇文章真是太棒了，原文是英文，博主就不翻译了，相信读者们的英语水平，故直接转到本篇博文中，希望对大家会有所帮助。</p>
<h2 id="Trie-implementation-in-C"><a href="#Trie-implementation-in-C" class="headerlink" title="Trie implementation in C"></a>Trie implementation in C</h2><p>To implement the kind of storage which stores strings as the search keys , there is a need to have special data structures which can store the strings efficiently and the searching of data based on the string keys is easier, efficient and faster. One such data structure is a tree based implementation called Trie.</p>
<p>Trie is a data structure which can be used to implement a dictionary kind of application. It provides all the functionality to insert a string, search a string and delete a string from the dictionary. The insertion and deletion operation takes O(n) time where n is the length of the string to be deleted or inserted.<br>Some of the application of tries involve web based search engines, URL completion in autocomplete feature, Spell checker etc.</p>
<p><strong> Structure of Trie(Specific to this implementation): </strong></p>
<p>The trie implemented here consists of nodes. Each node has these fields:</p>
<ol>
<li><p><strong>Key</strong> - Part of the string to be serached,inserted or deleted.</p>
</li>
<li><p><strong>Value</strong> -  The value associated with a string (e.g In a dictionary it could be the meaning of the word which we are searching)</p>
</li>
<li><p><strong>Neighbour node address</strong> - It consists of the address of the neighbouring node at the same level.</p>
</li>
<li><p><strong>Previous neighbour address</strong> - It consists of the address of the previous node at the same level.</p>
</li>
<li><p><strong>Children node address</strong> - It consists of the address of the child nodes of the current node.</p>
</li>
<li><p><strong>Parent node address</strong> - It consists of the address of the parent node of the current node.</p>
</li>
</ol>
<p>The additional nodes like Parent and Previous nodes are added to this implementation for making the search, and deletions easier.</p>
<p>Here is a diagrammatical view of a trie nodes I have used in this implementation. The field key is not represented in the diagram due to symmetry purposes.</p>
<p><img src="/images/2016/7/12/TrieNodes1.png" alt="这里写图片描述"></p>
<p>Let us consider an example to understand tries in detail.</p>
<p>Suppose we have to implement a database for the HR department of an organisation in which we have to store an employee’s name and their ages. There is an assumption for this example that there each employee’s name is unique.So there is a strange policy in this organisation that any new employee which has a name that already exists in the organisation, it would not hire that new employee.</p>
<p>Let’s use this hypothetical example just to understand how tries work.</p>
<ul>
<li>Consider we have a new employee named Andrew with age 36. Lets populate our trie for “andrew”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie1.png" alt="这里写图片描述"></p>
<ul>
<li>Now add “tina”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie2.png" alt="这里写图片描述"></p>
<ul>
<li>Add “argo”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie3.png" alt="这里写图片描述"></p>
<ul>
<li>Add “tim”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie4.png" alt="这里写图片描述"></p>
<ul>
<li>Add “t”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie5.png" alt="这里写图片描述"></p>
<ul>
<li>Add “amy”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie6.png" alt="这里写图片描述"></p>
<ul>
<li>Add “aramis”.</li>
</ul>
<p><img src="/images/2016/7/12/Trie7.png" alt="这里写图片描述"></p>
<p>This is the complete Trie with all the entries. Now let us try deleting the names. I am not capturing the trivial cases.</p>
<ul>
<li>Lets try deleting Argo.</li>
</ul>
<p><img src="/images/2016/7/12/TrieD1.png" alt="这里写图片描述"></p>
<ul>
<li>Delete Tina</li>
</ul>
<p><img src="/images/2016/7/12/TrieD2.png" alt="这里写图片描述"></p>
<ul>
<li>Delete Andrew</li>
</ul>
<p><img src="/images/2016/7/12/TrieD3.png" alt="这里写图片描述"></p>
<p>There is also a video from IIT Delhi which explains the tries. <a href="http://www.youtube.com/watch?v=uhAUk63tLRM" target="_blank" rel="noopener">Tries Explained</a>.</p>
<p>The implementation for this Trie is given below. Please provide your suggestions to further improve the implementation.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> trieVal_t;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> key;</span><br><span class="line">    trieVal_t value;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> *<span class="title">next</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> *<span class="title">prev</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> *<span class="title">children</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> *<span class="title">parent</span>;</span></span><br><span class="line">&#125; trieNode_t;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieCreate</span><span class="params">(trieNode_t **root)</span></span>;</span><br><span class="line"><span class="function">trieNode_t* <span class="title">TrieSearch</span><span class="params">(trieNode_t *root, <span class="keyword">const</span> <span class="keyword">char</span> *key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieAdd</span><span class="params">(trieNode_t **root, <span class="keyword">char</span> *key, <span class="keyword">int</span> data)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieRemove</span><span class="params">(trieNode_t **root, <span class="keyword">char</span> *key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieDestroy</span><span class="params">( trieNode_t* root )</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*trie.c*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"trie.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function">trieNode_t *<span class="title">TrieCreateNode</span><span class="params">(<span class="keyword">char</span> key, <span class="keyword">int</span> data)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieCreate</span><span class="params">(trieNode_t **root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> *root = TrieCreateNode(<span class="string">'\0'</span>, <span class="number">0xffffffff</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">trieNode_t *<span class="title">TrieCreateNode</span><span class="params">(<span class="keyword">char</span> key, <span class="keyword">int</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> trieNode_t *node = <span class="literal">NULL</span>;</span><br><span class="line"> node = (trieNode_t *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(trieNode_t));</span><br><span class="line"> <span class="keyword">if</span>(<span class="literal">NULL</span> == node)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Malloc failed\n"</span>);</span><br><span class="line">  <span class="keyword">return</span> node;</span><br><span class="line"> &#125;</span><br><span class="line"> node-&gt;key = key;</span><br><span class="line"> node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"> node-&gt;children = <span class="literal">NULL</span>;</span><br><span class="line"> node-&gt;value = data;</span><br><span class="line"> node-&gt;parent= <span class="literal">NULL</span>;</span><br><span class="line"> node-&gt;prev= <span class="literal">NULL</span>;</span><br><span class="line"> <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieAdd</span><span class="params">(trieNode_t **root, <span class="keyword">char</span> *key, <span class="keyword">int</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> trieNode_t *pTrav = <span class="literal">NULL</span>;</span><br><span class="line"> <span class="keyword">if</span>(<span class="literal">NULL</span> == *root)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"NULL tree\n"</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"\nInserting key %s: \n"</span>,key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> pTrav = (*root)-&gt;children;</span><br><span class="line"> <span class="keyword">if</span>(pTrav == <span class="literal">NULL</span>)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/*First Node*/</span></span><br><span class="line">  <span class="keyword">for</span>(pTrav = *root; *key; pTrav = pTrav-&gt;children)</span><br><span class="line">  &#123;</span><br><span class="line">   pTrav-&gt;children = TrieCreateNode(*key, <span class="number">0xffffffff</span>);</span><br><span class="line">   pTrav-&gt;children-&gt;parent = pTrav;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Inserting: [%c]\n"</span>,pTrav-&gt;children-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   key++;</span><br><span class="line">  &#125;</span><br><span class="line">  pTrav-&gt;children = TrieCreateNode(<span class="string">'\0'</span>, data);</span><br><span class="line">  pTrav-&gt;children-&gt;parent = pTrav;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Inserting: [%c]\n"</span>,pTrav-&gt;children-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span>(TrieSearch(pTrav, key))</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Duplicate!\n"</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">while</span>(*key != <span class="string">'\0'</span>)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(*key == pTrav-&gt;key)</span><br><span class="line">  &#123;</span><br><span class="line">   key++;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Traversing child: [%c]\n"</span>,pTrav-&gt;children-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   pTrav = pTrav-&gt;children;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">while</span>(pTrav-&gt;next)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>(*key == pTrav-&gt;next-&gt;key)</span><br><span class="line">  &#123;</span><br><span class="line">   key++;</span><br><span class="line">   TrieAdd(&amp;(pTrav-&gt;next), key, data);</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  pTrav = pTrav-&gt;next;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span>(*key)</span><br><span class="line"> &#123;</span><br><span class="line">  pTrav-&gt;next = TrieCreateNode(*key, <span class="number">0xffffffff</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line">  pTrav-&gt;next = TrieCreateNode(*key, data);</span><br><span class="line"> &#125;</span><br><span class="line"> pTrav-&gt;next-&gt;parent = pTrav-&gt;parent;</span><br><span class="line"> pTrav-&gt;next-&gt;prev = pTrav;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"Inserting [%c] as neighbour of [%c] \n"</span>,pTrav-&gt;next-&gt;key, pTrav-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> <span class="keyword">if</span>(!(*key))</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> key++;</span><br><span class="line"> <span class="keyword">for</span>(pTrav = pTrav-&gt;next; *key; pTrav = pTrav-&gt;children)</span><br><span class="line"> &#123;</span><br><span class="line">  pTrav-&gt;children = TrieCreateNode(*key, <span class="number">0xffffffff</span>);</span><br><span class="line">  pTrav-&gt;children-&gt;parent = pTrav;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Inserting: [%c]\n"</span>,pTrav-&gt;children-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  key++;</span><br><span class="line"> &#125;</span><br><span class="line"> pTrav-&gt;children = TrieCreateNode(<span class="string">'\0'</span>, data);</span><br><span class="line"> pTrav-&gt;children-&gt;parent = pTrav;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"Inserting: [%c]\n"</span>,pTrav-&gt;children-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">trieNode_t* <span class="title">TrieSearch</span><span class="params">(trieNode_t *root, <span class="keyword">const</span> <span class="keyword">char</span> *key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> trieNode_t *level = root;</span><br><span class="line"> trieNode_t *pPtr = <span class="literal">NULL</span>;</span><br><span class="line"> <span class="keyword">int</span> lvl=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line">  trieNode_t *found = <span class="literal">NULL</span>;</span><br><span class="line">  trieNode_t *curr;</span><br><span class="line">  <span class="keyword">for</span> (curr = level; curr != <span class="literal">NULL</span>; curr = curr-&gt;next)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span> (curr-&gt;key == *key)</span><br><span class="line">   &#123;</span><br><span class="line">    found = curr;</span><br><span class="line">    lvl++;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (found == <span class="literal">NULL</span>)</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (*key == <span class="string">'\0'</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   pPtr = curr;</span><br><span class="line">   <span class="keyword">return</span> pPtr;</span><br><span class="line">  &#125;</span><br><span class="line">  level = found-&gt;children;</span><br><span class="line">  key++;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieRemove</span><span class="params">(trieNode_t **root, <span class="keyword">char</span> *key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> trieNode_t *tPtr = <span class="literal">NULL</span>;</span><br><span class="line"> trieNode_t *tmp = <span class="literal">NULL</span>;</span><br><span class="line"> <span class="keyword">if</span>(<span class="literal">NULL</span> == *root || <span class="literal">NULL</span> == key)</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> tPtr = TrieSearch((*root)-&gt;children, key);</span><br><span class="line"> <span class="keyword">if</span>(<span class="literal">NULL</span> == tPtr)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Key [%s] not found in trie\n"</span>, key);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"Deleting key [%s] from trie\n"</span>, key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"> <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span>( tPtr-&gt;prev &amp;&amp; tPtr-&gt;next)</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;next-&gt;prev = tPtr-&gt;prev;</span><br><span class="line">   tPtr-&gt;prev-&gt;next = tPtr-&gt;next;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(tPtr-&gt;prev &amp;&amp; !(tPtr-&gt;next))</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;prev-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(!(tPtr-&gt;prev) &amp;&amp; tPtr-&gt;next)</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;next-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">   tPtr-&gt;parent-&gt;children = tPtr-&gt;next;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr = tPtr-&gt;parent;</span><br><span class="line">   tPtr-&gt;children = <span class="literal">NULL</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"Deleted key [%s] from trie\n"</span>, key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TrieDestroy</span><span class="params">( trieNode_t* root )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> trieNode_t *tPtr = root;</span><br><span class="line"> trieNode_t *tmp = root;</span><br><span class="line">    <span class="keyword">while</span>(tPtr)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">while</span>(tPtr-&gt;children)</span><br><span class="line">   tPtr = tPtr-&gt;children;</span><br><span class="line">  <span class="keyword">if</span>( tPtr-&gt;prev &amp;&amp; tPtr-&gt;next)</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;next-&gt;prev = tPtr-&gt;prev;</span><br><span class="line">   tPtr-&gt;prev-&gt;next = tPtr-&gt;next;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(tPtr-&gt;prev &amp;&amp; !(tPtr-&gt;next))</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;prev-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(!(tPtr-&gt;prev) &amp;&amp; tPtr-&gt;next)</span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   tPtr-&gt;parent-&gt;children = tPtr-&gt;next;</span><br><span class="line">   tPtr-&gt;next-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">   tPtr = tPtr-&gt;next;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">   tmp = tPtr;</span><br><span class="line">   <span class="keyword">if</span>(tPtr-&gt;parent == <span class="literal">NULL</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="comment">/*Root*/</span></span><br><span class="line">    <span class="built_in">free</span>(tmp);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   tPtr = tPtr-&gt;parent;</span><br><span class="line">   tPtr-&gt;children = <span class="literal">NULL</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"Deleted [%c] \n"</span>, tmp-&gt;key);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   <span class="built_in">free</span>(tmp);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*triedriver.c*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * To Compile : gcc -o trie trie.c triedriver.c</span></span><br><span class="line"><span class="comment"> * To run: ./trie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"trie.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    trieNode_t *root = <span class="literal">NULL</span>;</span><br><span class="line">    trieNode_t* ret = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Trie Example\n"</span>);</span><br><span class="line">    <span class="comment">/*Create a trie*/</span></span><br><span class="line">    TrieCreate(&amp;root);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"andrew"</span>, <span class="number">1</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"tina"</span>, <span class="number">2</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"argo"</span>, <span class="number">3</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"timor"</span>, <span class="number">5</span>);</span><br><span class="line">    TrieRemove(&amp;root, <span class="string">"tim"</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"tim"</span>, <span class="number">6</span>);</span><br><span class="line">    TrieRemove(&amp;root, <span class="string">"tim"</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"ti"</span>, <span class="number">6</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"amy"</span>, <span class="number">7</span>);</span><br><span class="line">    TrieAdd(&amp;root, <span class="string">"aramis"</span>, <span class="number">8</span>);</span><br><span class="line">     ret = TrieSearch(root-&gt;children, <span class="string">"andrew"</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">NULL</span> != ret)</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"value %d\n"</span>, ret-&gt;value);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"not found\n"</span>);</span><br><span class="line">    <span class="comment">/*Destroy the trie*/</span></span><br><span class="line">    TrieDestroy(root);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In order to print the debug messages, use -DDEBUG while compiling with gcc:</p>
<p><code>gcc trie.c triedriver.c -DDEBUG -o trie</code></p>
<hr>
<p>参考资料：</p>
<ol>
<li><a href="https://zh.wikipedia.org/wiki/Trie" target="_blank" rel="noopener">维基百科</a></li>
<li><a href="https://simplestcodings.blogspot.com/2012/11/trie-implementation-in-c.html" target="_blank" rel="noopener">simplestcodings</a></li>
</ol>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/数据结构/">数据结构</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/07/19/计算机系统中的链接（一）/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">计算机系统中的链接（一）</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2016/07/07/Linux中libhugetlbfs的使用/">
        <span class="next-text nav-default">Linux中libhugetlbfs的使用</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:liujunming1163@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/liujunming" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2016 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">liujunming</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://liujunming.github.io/2016/07/12/Trie树的概念及其实现/';
        this.page.identifier = '2016/07/12/Trie树的概念及其实现/';
        this.page.title = 'Trie树的概念及其实现';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//http-liujunming-top-2.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
