<!DOCTYPE html>
<html lang="zh-CN">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Video BIOS Table (VBT)">




  <meta name="keywords" content="GPU, L">










  <link rel="alternate" href="/atom.xml" title="L">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.1">



<link rel="canonical" href="http://liujunming.github.io/2021/06/18/Video-BIOS-Table-VBT/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.1">



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> Video BIOS Table (VBT) - L </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">L</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/links">
        <li class="mobile-menu-item">
          
          
            Links
          
        </li>
      </a>
    
      <a href="/books">
        <li class="mobile-menu-item">
          
          
            Books
          
        </li>
      </a>
    
      <a href="/course">
        <li class="mobile-menu-item">
          
          
            Course
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">L</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/links">
            
            
              Links
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/books">
            
            
              Books
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/course">
            
            
              Course
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Video BIOS Table (VBT)
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2021-06-18
        </span>
        
          <span class="post-category">
            
              <a href="/categories/GPU/">GPU</a>
            
          </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Definition-of-Video-BIOS-Table-VBT"><span class="toc-text">1. Definition of Video BIOS Table (VBT)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-EDID-Structure"><span class="toc-text">2. EDID Structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-VBT-OSes-Windows-and-Linux-Support"><span class="toc-text">3. VBT OSes (Windows and Linux) Support</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-VBT-Legacy-BIOS-mode-support"><span class="toc-text">4. VBT Legacy BIOS mode support</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-VBT-UEFI-mode-support"><span class="toc-text">5. VBT UEFI mode support</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-VBT-location"><span class="toc-text">6. VBT  location</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Intel-GPU-Tools"><span class="toc-text">7. Intel GPU Tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Extension"><span class="toc-text">8. Extension</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <p>本文内容源于:<br><a href="https://github.com/ZoranStojsavljevic/Video-BIOS-Table-parser-assembler/wiki/Video-BIOS-Table-(VBT)" target="_blank" rel="noopener">https://github.com/ZoranStojsavljevic/Video-BIOS-Table-parser-assembler/wiki/Video-BIOS-Table-(VBT)</a> 并对相关内容做出补充。<br><a id="more"></a></p>
<h3 id="1-Definition-of-Video-BIOS-Table-VBT"><a href="#1-Definition-of-Video-BIOS-Table-VBT" class="headerlink" title="1. Definition of Video BIOS Table (VBT)"></a>1. Definition of Video BIOS Table (VBT)</h3><p>The Video BIOS Table, or VBT, provides platform and board specific configuration information to the driver that is not discoverable or available through other means. By other means the most used method here is to read EDID table from the attached monitor, over Display Data Channel (DDC) using two pin I2C serial interface.</p>
<p>The VBT configuration is related to display hardware. The VBT is available via the ACPI OpRegion or, on older systems, in the PCI ROM (Option ROM).</p>
<p>The VBT consists of a VBT Header, a BIOS Data Block (BDB) Header, and a number of BIOS Data Blocks (BDBs) that contain the actual configuration information (supposed to replace the absence of EDID structure with the older monitors). The VBT Header, and thus the VBT, begins with “$VBT” signature. The VBT Header contains the offset of the BDB Header. The BDB header starts with the “BIOS_DATA_BLOCK” signature. The data blocks are concatenated after the BDB Header (not always in exact order, and certain BDBs might be missing, not implemented for such type of HW platforms). The data blocks have a 1-byte Block ID, 2-byte Block Size, and Block Size bytes of data (Block 53, the MIPI Sequence Block is an exception).</p>
<p>The GFX driver parses the VBT during load. The relevant information is stored in GFX driver private data for ease of use, and the actual VBT is not read after that.</p>
<h3 id="2-EDID-Structure"><a href="#2-EDID-Structure" class="headerlink" title="2. EDID Structure"></a>2. EDID Structure</h3><p>To understand better what is Video BIOS Table, reader should read the following document: <a href="http://www.extron.com/company/article.aspx?id=uedid" target="_blank" rel="noopener">Understanding EDID - Extended Display Identification Data</a>.</p>
<p>Please, do note that EDID is implemented for DVI, HDMI, and DisplayPort (Present Time). Some very cheap monitors still (for cost saving) do not implement EDID standard (in which case VBT entries for such monitors are required).</p>
<h3 id="3-VBT-OSes-Windows-and-Linux-Support"><a href="#3-VBT-OSes-Windows-and-Linux-Support" class="headerlink" title="3. VBT OSes (Windows and Linux) Support"></a>3. VBT OSes (Windows and Linux) Support</h3><p>As stated previously, VBT means Video BIOS Table. It’s a 100% Intel specific table of configuration options for Intel’s Video BIOS and Intel’s graphics drivers. Since VBT is not related to the concept of a Video BIOS or any standard, it cannot be replaced by something (GOP) that continues standards story.</p>
<p>There is no detailed public documentation, but as it’s used by the Linux driver, at least the structure and some of the values are publicly “documented” <a href="https://www.kernel.org/doc/html/latest/gpu/i915.html#video-bios-table-vbt" target="_blank" rel="noopener">drm/i915 Intel GFX Driver</a>. Developers of the i915 Linux driver stated that they are not willing to support systems without a VBT. Most features of the i915 driver work without a VBT by chance. But anything board specific, like integrated panels in laptops, will likely not work. Windows won’t even try to get things running without VBT.</p>
<h3 id="4-VBT-Legacy-BIOS-mode-support"><a href="#4-VBT-Legacy-BIOS-mode-support" class="headerlink" title="4. VBT Legacy BIOS mode support"></a>4. VBT Legacy BIOS mode support</h3><p>As far as legacy BIOS concerned, the context is placed in the x86 Real Mode of operation. VBT is used with the legacy Video BIOS (vBIOS), which is placed as Option ROM at the address 0xC0000 (till maximal address 0xCFFFF), thus maximum size of 64KB.</p>
<h3 id="5-VBT-UEFI-mode-support"><a href="#5-VBT-UEFI-mode-support" class="headerlink" title="5. VBT UEFI mode support"></a>5. VBT UEFI mode support</h3><p><a href="http://www.uefi.org/sites/default/files/resources/UPFS11_P4_UEFI_GOP_AMD.pdf" target="_blank" rel="noopener">The GOP driver</a> is a replacement for legacy video BIOS and enables the use of UEFI pre-boot firmware without CSM. The GOP driver can be 32-bit, 64-bit, or IA-64 with no binary compatibility. UEFI pre-boot firmware architecture (32-/64-bit) must match the GOP driver architecture (32-/64-bit). The Intel Embedded Graphics Drivers’ GOP driver can either be fast boot (speed optimized and platform specific) or generic (platform agnostic for selective platforms).</p>
<p>Here is a quick comparison between GOP and video BIOS:</p>
<ul>
<li>Video BIOS: 64 KB limit. 16-bit execution. CSM is needed with UEFI system firmware. Performance inferior to GOP CSM. The VBIOS works with both 32- and 64-bit architectures.</li>
<li>GOP: No 64 KB limit. 32-bit protected mode. No need for CSM. Speed optimized (fast boot). The UEFI pre-boot firmware architecture (32-/64-bit) must match the GOP driver.</li>
</ul>
<h3 id="6-VBT-location"><a href="#6-VBT-location" class="headerlink" title="6. VBT  location"></a>6. VBT  location</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo hexdump -C /sys/kernel/debug/dri/0/i915_vbt</span><br></pre></td></tr></table></figure>
<p>VBT table is easily locatable. It is located in the <code>/sys</code> directory: <code>/sys/kernel/debug/dri/0/i915_vbt</code>(since kernel version 4.5).</p>
<p>Please, read the following web page for more information: <a href="https://manpages.debian.org/experimental/intel-gpu-tools/intel_vbt_decode.1.en.html" target="_blank" rel="noopener">intel_vbt_decode</a>.</p>
<h3 id="7-Intel-GPU-Tools"><a href="#7-Intel-GPU-Tools" class="headerlink" title="7. Intel GPU Tools"></a>7. Intel GPU Tools</h3><p>VBT is also documented by intel-gpu-tools. There’s intel_vbt_decode available, <a href="https://cgit.freedesktop.org/xorg/app/intel-gpu-tools/tree/tools/intel_vbt_decode.c" target="_blank" rel="noopener">intel_vbt_decode.c</a>  will print all tables in human readable form.</p>
<p>After <a href="https://zoomadmin.com/HowToInstall/UbuntuPackage/intel-gpu-tools" target="_blank" rel="noopener">installation</a>, type<code>man intel_vbt_decode</code> for more detailed information.</p>
<h3 id="8-Extension"><a href="#8-Extension" class="headerlink" title="8. Extension"></a>8. Extension</h3><p><a href="https://01.org/sites/default/files/documentation/acpi_igd_opregion_spec_0.pdf" target="_blank" rel="noopener">Intel Integrated Graphics Device OpRegion Specification</a></p>
<p><a href="https://lwn.net/Articles/429319/" target="_blank" rel="noopener">ACPI/Intel: Rework Opregion support</a></p>
<p>From patch <a href="https://patchwork.kernel.org/project/intel-gfx/patch/20210208170253.29968-1-fred.gao@intel.com/" target="_blank" rel="noopener">vfio/pci: Add support for opregion v2.1+</a>, we can know:</p>
<ol>
<li>Before OpRegion v2.0(version 2.0), VBT data is stored in OpRegion mailbox #4,</li>
<li>For OpRegion v2.0 or v2.1+:<ul>
<li>When VBT size is less than 6KB, the VBT will be stored on OpRegion Mailbox 4</li>
<li>when VBT size exceeds 6KB:<ul>
<li>For OpRegion v2.0, the OpRegion Mailbox 3 RVDA store the absolute address of raw VBT data from OpRegion base</li>
<li>For OpRegion v2.1+, the OpRegion Mailbox 3 RVDA store the relative address of raw VBT data from OpRegion base</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<p>参考资料:</p>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Video_BIOS" target="_blank" rel="noopener">Video BIOS</a></li>
<li><a href="https://en.wikipedia.org/wiki/Real_mode" target="_blank" rel="noopener">Real Mode</a></li>
<li><a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface" target="_blank" rel="noopener">UEFI</a></li>
<li><a href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface" target="_blank" rel="noopener">ACPI</a></li>
<li><a href="https://en.wikipedia.org/wiki/Open_Firmware" target="_blank" rel="noopener">Open Firmware</a></li>
<li><a href="https://en.wikipedia.org/wiki/OpenBIOS" target="_blank" rel="noopener">OpenBIOS</a></li>
<li><a href="https://en.wikipedia.org/wiki/UEFI_Platform_Initialization" target="_blank" rel="noopener">Platform Initialization Specification</a></li>
<li><a href="https://en.wikipedia.org/wiki/System_Management_BIOS" target="_blank" rel="noopener">SMBIOS</a></li>
<li><a href="https://en.wikipedia.org/wiki/System_Management_Mode" target="_blank" rel="noopener">SMM</a></li>
<li><a href="https://en.wikipedia.org/wiki/Coreboot" target="_blank" rel="noopener">Coreboot</a></li>
<li><a href="https://en.wikipedia.org/wiki/Category:Graphics_software" target="_blank" rel="noopener">Category:Graphics software</a></li>
</ol>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/GPU/">GPU</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2021/06/24/Notes-about-EDID/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Notes about EDID</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2021/06/17/CSM-in-BIOS/">
        <span class="next-text nav-default">CSM booting in UEFI</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:liujunming1163@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/liujunming" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2016 - 
    
    2024

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">liujunming</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://liujunming.github.io/2021/06/18/Video-BIOS-Table-VBT/';
        this.page.identifier = '2021/06/18/Video-BIOS-Table-VBT/';
        this.page.title = 'Video BIOS Table (VBT)';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//http-liujunming-top-2.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
